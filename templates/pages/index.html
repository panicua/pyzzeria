{% extends 'layouts/base_sections.html' %}
{% load static %}
{% load query_transform %}

{% block body %} class="index-page bg-gray-200" {% endblock body %}

{% block content %}
  <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css"
        integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk="
        crossorigin="anonymous"/>
  <section style="margin-top: 15px" class="blog-listing gray-bg">
    <div class="container">
      <div class="row align-items-start">
        <div class="col-lg-8 m-15px-tb">
          <div class="row">
            {% for dish in dishes_list %}
              <div class="col-sm-6">
                <div class="blog-grid">
                  <div class="blog-img">
                    {% if dish.image %}
                      <a href="#">
                      <img
                          src="{{ dish.image.url }}"
                          title="" alt="">
                      </a>
                    {% else %}
                      <a href="#">
                      <img
                          src="https://www.bootdey.com/image/400x200/FFB6C1/000000"
                          title="" alt="">
                      </a>
                    {% endif %}

                  </div>
                  <div class="blog-info">
                    <h5><a href="#">{{ dish.name }}</a></h5>
                    <p>{{ dish.ingredients }}</p>
                    <p><strong>{{ dish.price }} USD</strong>
                      <a href="#">
                        <button type="button"
                                class="btn btn-sm btn-primary w-auto me-1 mb-0">
                          Add
                        </button>
                      </a>
                    </p>
                  </div>
                </div>
              </div>
            {% endfor %}
          </div>
          {% block pagination %}
            {% include "includes/pagination.html" with page_obj=dishes_list %}
          {% endblock pagination %}
        </div>

        <div class="col-lg-4 m-15px-tb blog-aside">
          >>ORDER COUNTER WILL BE HERE<<
        </div>
      </div>
    </div>
  </section>

{% endblock content %}

{% block javascripts %}
  <script type="text/javascript">
      if (document.getElementById('state1')) {
          const countUp = new CountUp('state1', document.getElementById("state1").getAttribute("countTo"));
          if (!countUp.error) {
              countUp.start();
          } else {
              console.error(countUp.error);
          }
      }
      if (document.getElementById('state2')) {
          const countUp1 = new CountUp('state2', document.getElementById("state2").getAttribute("countTo"));
          if (!countUp1.error) {
              countUp1.start();
          } else {
              console.error(countUp1.error);
          }
      }
      if (document.getElementById('state3')) {
          const countUp2 = new CountUp('state3', document.getElementById("state3").getAttribute("countTo"));
          if (!countUp2.error) {
              countUp2.start();
          } else {
              console.error(countUp2.error);
          }
      }
  </script>
{% endblock javascripts %}
